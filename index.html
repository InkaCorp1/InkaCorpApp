<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inka Corp - Panel de Control</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="print.css" media="print">
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- jsPDF para generación de PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- QR.js para códigos QR -->
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
</head>
<body>

    <!-- Login Container -->
    <div id="login-container" class="view-wrapper">
        <div class="login-box">
            <div class="logo">
                <img src="https://lh3.googleusercontent.com/d/15J6Aj6ZwkVrmDfs6uyVk-oG0Mqr-i9Jn=w2048?name=inka%20corp%20normal.png" alt="Inka Corp Logo">
            </div>
            <h2>Bienvenido</h2>
            <p>Inicia sesión para acceder al panel de control</p>
            <form id="login-form" class="login-form">
                <div class="input-group">
                    <label for="email">Correo Electrónico</label>
                    <input type="email" id="email" name="email" required autocomplete="email">
                </div>
                <div class="input-group">
                    <label for="password">Contraseña</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-login">
                    Ingresar
                    <span class="loader"></span>
                </button>
            </form>
            <div id="login-message" class="hidden"></div>
        </div>
    </div>

    <!-- Main App Wrapper (hidden by default) -->
    <div id="app-wrapper" class="view-wrapper is-hidden">
        <header class="main-header">
            <div class="container-content">
                <a href="#" class="logo" id="logo-home-link">
                    <img src="https://lh3.googleusercontent.com/d/15J6Aj6ZwkVrmDfs6uyVk-oG0Mqr-i9Jn=w2048?name=inka%20corp%20normal.png" alt="Inka Corp Logo">
                </a>
                
                <nav class="main-nav" id="main-nav">
                    <ul>
                        <li><a href="#" class="active" data-view="dashboard">Dashboard</a></li>
                        <li><a href="#" data-view="solicitudes">Solicitudes</a></li>
                        <li><a href="#" data-view="usuarios">Usuarios</a></li>
                        <li><a href="#" data-view="configuracion">Configuración</a></li>
                    </ul>
                </nav>
    
                <div class="header-actions" id="header-actions">
                    <button id="logout-button" class="btn">
                        Cerrar Sesión
                        <span class="loader"></span>
                    </button>
                </div>
    
                <button class="mobile-menu-button" id="mobile-menu-button">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </header>
    
        <main id="main-content">
            <!-- El dashboard principal se muestra por defecto -->
            <div id="dashboard-view">
                <section class="hero">
                    <div class="container-content">
                        <h1>Panel de Administración Inka Corp</h1>
                        <p>Gestión y monitoreo de operaciones bancarias y de usuarios.</p>
                        <a href="#" class="btn btn-contrast">Ver Reportes del Día</a>
                    </div>
                </section>
        
                <section class="services">
                    <div class="container-content">
                        <h2>Módulos de Gestión</h2>
                        <div class="services-grid">
                            <div class="service-card" data-view-target="solicitudes">
                                <i class="fas fa-file-invoice-dollar"></i>
                                <h3>Solicitudes de Crédito</h3>
                                <p>Revisa, aprueba o rechaza las solicitudes de crédito pendientes.</p>
                            </div>
                            <div class="service-card">
                                <i class="fas fa-users-cog"></i>
                                <h3>Gestión de Usuarios</h3>
                                <p>Administra altas, bajas, permisos y perfiles de todos los clientes.</p>
                            </div>
                            <div class="service-card">
                                <i class="fas fa-chart-line"></i>
                                <h3>Monitoreo y Fraude</h3>
                                <p>Supervisa transacciones en tiempo real y detecta actividades sospechosas.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Vista de Solicitudes (oculta por defecto) -->
            <section id="solicitudes-view" class="hidden">
                <div class="container">
                    <div class="section-header">
                        <h2>Solicitudes de Crédito</h2>
                        <button id="refresh-solicitudes" class="btn btn-primary">
                            <i class="fas fa-sync-alt"></i>
                            Actualizar
                        </button>
                    </div>
                    <div id="solicitudes-table-container">
                        <table id="solicitudes-table" class="table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Nombre</th>
                                    <th>Cédula</th>
                                    <th>Monto</th>
                                    <th>Estado</th>
                                    <th>Fecha</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="7" class="text-center">Cargando solicitudes...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Vista de Detalles de Solicitud (oculta por defecto) -->
            <section id="solicitud-detalles-view" class="hidden">
                <div class="details-container">
                    <div class="details-header">
                        <button id="back-to-solicitudes" class="btn-back">
                            <i class="fas fa-arrow-left"></i>
                            Regresar
                        </button>
                        <div class="details-title">
                            <h2 id="details-title">
                                <i class="fas fa-file-invoice-dollar"></i>
                                Detalles de Solicitud
                            </h2>
                            <p id="details-subtitle">Información completa de la solicitud de crédito</p>
                        </div>
                        <div class="details-actions">
                            <button id="corregir-btn" class="btn btn-primary">
                                <i class="fas fa-edit"></i>
                                Corregir
                            </button>
                            <button id="guardar-btn" class="btn btn-success hidden">
                                <i class="fas fa-save"></i>
                                Guardar
                            </button>
                            <button id="cancelar-btn" class="btn btn-secondary hidden">
                                <i class="fas fa-times"></i>
                                Cancelar
                            </button>
                            <button id="save-pdf-btn" class="btn btn-secondary">
                                <i class="fas fa-file-pdf"></i>
                                Guardar PDF
                                <span class="loader"></span>
                            </button>
                        </div>
                    </div>

                    <div id="details-loading" class="loading-section">
                        <i class="fas fa-spinner fa-spin fa-2x"></i>
                        <p>Cargando información de la solicitud...</p>
                    </div>

                    <div id="details-error" class="error-section" style="display: none;">
                        <i class="fas fa-exclamation-triangle fa-2x"></i>
                        <p>Error al cargar la información de la solicitud</p>
                    </div>

                    <div id="details-content" class="details-content" style="display: none;">
                        <div class="details-grid">
                            <div class="detail-card" id="personal-details">
                                <h3>Información Personal</h3>
                                <div class="detail-items"></div>
                            </div>
                            <div class="detail-card" id="laboral-details">
                                <h3>Información Familiar</h3>
                                <div class="detail-items"></div>
                            </div>
                            <div class="detail-card" id="credito-details">
                                <h3>Información del Crédito</h3>
                                <div class="detail-items"></div>
                            </div>
                            <div class="detail-card" id="estado-details">
                                <h3>Documentos</h3>
                                <div class="detail-items"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <!-- Photo Viewer (hidden by default) -->
        <div id="photo-viewer" class="photo-viewer" style="display: none;">
            <!-- Content will be generated by JavaScript -->
        </div>
    
        <footer class="main-footer">
            <div class="container-content footer-content">
                <ul class="footer-links">
                    <li><a href="#">Documentación API</a></li>
                    <li><a href="#">Soporte Técnico</a></li>
                </ul>
                <p>&copy; 2025 Inka Corp. Todos los derechos reservados.</p>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="main.js"></script>
    <script src="auth.js"></script>
    <script src="solicitudes.js"></script>
    <script src="app.js"></script>
</body>
</html>